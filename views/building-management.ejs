<% layout('layouts/boilerplate') %>
<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
    </head>
    <body>
        <div class="container-fluid" style="background-color: aliceblue;">
            <h1 style="text-align: center;">Building Management</h1>
        </div>
        <div style="border: 1px solid orange; border-radius: 10px; padding: 12px 5px 1px 5px; margin-left:2px; margin-right:2px; background-color: peachpuff;">
            
                <h4 style="display:inline-block">Last time cleaned: </h4>
                <p style="display:inline-block"> 2021/10/8 14:00</p>
        </div>
        <div style="float:left; background-color: mistyrose; width:50%">
            <h3 style="text-align: center;">Risky Buildings</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">Rank</th>
                        <th scope="col">Building</th>
                        <th scope="col">Number of positive in last 7 days</th>
                    </tr>
                </thead>
                <tbody id="riskyBuildingsTable">
                    <tr onclick="clickRow(this)">
                        <td>1</td>
                        <td>AS1</td>
                        <td>7</td>
                    </tr>
                    <tr onclick="clickRow(this)">
                        <td>2</td>
                        <td>EW2</td>
                        <td>6</td>
                    </tr>
                    <tr onclick="clickRow(this)">
                        <td>3</td>
                        <td>LAW</td>
                        <td>4</td>
                    </tr>
                </tbody>
            </table> 
        </div>
        <div style="float:left; background-color:mintcream; width:50%">
            <h3 style="text-align: center;">Safe Buildings</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">Rank</th>
                        <th scope="col">Building</th>
                        <th scope="col">Number of consecutive days of no positive</th>
                    </tr>
                </thead>
                <tbody id="saveBuildingsTable">
                    <tr>
                        <td>1</td>
                        <td>COM1</td>
                        <td>30</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>COM2</td>
                        <td>28</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>BIZ1</td>
                        <td>27</td>
                    </tr>
                </tbody>
            </table> 
        </div>
        <div>
            <dialog id="riskyBuildingDetail" style="background-color: moccasin;">
                Building:<span id="building"></span>
                <div>
                    Date and Number of Tested Positive:
                    <table>
                        <thead>
                            <tr>
                                <th scope="col">Date with positive tested</th>
                                <th scope="col">Number</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2021.9.27</td>
                                <td>2</td>
                            </tr>
                            <tr>
                                <td>2021.9.26</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>2021.9.25</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>2021.9.24</td>
                                <td>1</td>
                            </tr>
                        </tbody>
                        
                    </table>
                    <button type="button" class="btn btn-outline-danger" onclick="closeBuildingDetail()">Close</button>
                </div>
                
            </dialog>
        </div>
        <script type="text/javascript">
            function clickRow(obj){
                var building = obj.cells[1].innerText;
                document.getElementById("building").innerText = building;
                var myDialog = document.getElementById("riskyBuildingDetail");
                myDialog.show();
            }
            function closeBuildingDetail(){
                var myDialog = document.getElementById("riskyBuildingDetail");
                myDialog.close();
            }
        </script>
    </body>
</html>